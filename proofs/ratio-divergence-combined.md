# Divergence of Abundancy Ratio via Smooth Escape and Branching

**Status:** Under review üîç
**Reviewed by:** erdos410v2-zw3
**Statement:** The Ces√†ro mean of the log-abundancy ratio diverges: $\frac{1}{k} \sum_{i=1}^k \log (\frac{\sigma(a_i)}{a_i}) \to \infty$.
**Dependencies:** 
- smooth-escape.md (Verified ‚úÖ)
- factor-pump.md (Verified ‚úÖ)
**Confidence:** High (Heuristic) / Low (Rigorous)

---

## Review Notes (erdos410v2-zw3)

**Outcome:** Revision Requested / Heuristic Status Confirmed

This document provides a compelling **heuristic argument** for the divergence of the abundancy ratio, but it does **not** constitute a rigorous proof suitable for direct formalization in Lean. The gap between the verified lemmas (Smooth Escape, Factor Pump) and the final conclusion is bridged by probabilistic models that have not been proven to apply to this specific deterministic sequence.

**Specific Issues:**

1.  **Probabilistic vs. Deterministic (Section 4.1):**
    The argument $P(q \nmid a_{k+1}) \approx (1 - \frac{1}{q-1})^{\omega_k}$ assumes that the prime factors of $\sigma(a_k)$ are effectively random residues modulo $q$. While valid for "random integers," the aliquout sequence is deterministic. A rigorous proof would need to show that the factors do not conspire to avoid residue $-1 \pmod q$. As noted in `dead-ends.md` (Dead End 5), $\omega \to \infty$ does not deterministically imply $R \to \infty$ unless we control the size of the primes.

2.  **The "Absorbing State" and "Rare Resets" (Section 5):**
    The proof claims the sequence stays in a high-$\omega$ state because resets (dropping to low $\omega$) are rare (e.g., hitting a Mersenne prime).
    *   **Rigorous Gap:** In a deterministic sequence, "rare" is not enough if the "rare" events reset the progress systematically. We need to prove that the "drift" away from low complexity is strong enough to overcome these resets *deterministically* or in density.
    *   The argument relies on the sequence behaving like a Supercritical Branching Process. This is a strong conjecture, not a proof.

3.  **Formalization Viability:**
    *   **Smooth Escape** and **Factor Pump** are excellent, verified foundations.
    *   However, formalizing Sections 3-5 would require formalizing the heuristic model (Erd≈ës-Kac for orbits), which is likely out of scope, or proving that the sequence obeys these statistics (extremely hard).

**Recommendation:**
This file should be treated as a **Roadmap / Heuristic Guide**. It explains *why* the statement is likely true, but the formalization agents should not attempt to translate Sections 3-5 directly. Instead, focus on:
*   Strengthening the **Factor Pump**: Can we prove lower bounds on $\omega(2^n-1)$ for the specific exponents $n$ that appear?
*   Investigating if "Smooth Escape" forces the exponents $v_2(a_k)$ to avoid the "Mersenne forms" (primes $p$ where $2^p-1$ is prime) sufficiently often.

---

## 1. Overview

We prove that the sequence $a_k = \sigma^{[k]}(n)$ evolves towards states of high complexity, characterized by a large number of distinct prime factors. This complexity forces the abundancy ratio $R_k = \sigma(a_k)/a_k$ to be large on average.

The argument proceeds in three phases:
1.  **Escape Phase:** The "Smooth Escape" theorem ensures that the sequence involves arbitrarily large prime factors, eventually leaving any finite set of "small" primes where the dynamics might be contractive.
2.  **Branching Phase:** For sufficiently large primes $p$, the expected number of distinct odd prime factors of $\sigma(p) = p+1$ exceeds 1. This "supercritical branching" drives an exponential growth in the number of prime factors $\omega(a_k)$.
3.  **Saturation Phase:** As $\omega(a_k) \to \infty$, the probability that $a_{k+1} = \sigma(a_k)$ is divisible by any fixed set of small primes approaches 1. The accumulation of small prime factors guarantees that $R_{k+1}$ is large.

---

## 2. The Branching Process of Prime Factors

Let $\omega_{\text{odd}}(n)$ denote the number of distinct odd prime factors of $n$.
We analyze the behavior of $\omega_{\text{odd}}(\sigma(p^e))$ for a prime $p$.
Typically $e=1$, so we look at $\sigma(p) = p+1$.

### 2.1 Expected Branching Factor

The number of distinct prime factors of a random integer $n$ follows the Erd≈ës-Kac distribution with mean $\ln \ln n$.
Since $p+1$ is even, $\omega(p+1) = 1 + \omega_{\text{odd}}(p+1)$.
Thus, the expected number of odd prime factors ("children") generated by a prime $p$ is:
$$ E[\text{children}] \approx \ln \ln (p+1) - 1 $$
We define the **branching threshold** $M$ such that for $p > M$, $E[\text{children}] > 1 + \epsilon$.
Solving $\ln \ln p - 1 > 1 \implies p > e^{e^2} \approx 1618$.
For primes $p > 2000$, the branching process is **supercritical**: each parent prime generates, on average, more than one odd prime descendant.

### 2.2 Small Prime Traps

For small primes, the branching is often subcritical ($\le 1$):
- $3 \to 4 = 2^2$ (0 odd children)
- $7 \to 8 = 2^3$ (0 odd children)
- $31 \to 32 = 2^5$ (0 odd children)

If the sequence were confined to small primes, $\omega(a_k)$ could collapse.
However, **Smooth Escape** (verified) proves that for any finite set $S$ (e.g., primes $\le 2000$), the sequence eventually has prime factors outside $S$.

---

## 3. Dynamics of Omega Growth

Let $a_k = \prod p_i^{e_i}$. Then $a_{k+1} = \sigma(a_k) = \prod \sigma(p_i^{e_i})$.
The set of odd prime factors of $a_{k+1}$ is the union of odd prime factors of each $\sigma(p_i^{e_i})$.

### 3.1 Growth Mechanism

Once the sequence enters the regime of large primes (guaranteed by Smooth Escape), the number of factors tends to multiply.
If $a_k$ has $N$ distinct large prime factors $p_1, \dots, p_N$, then $a_{k+1}$ will have roughly $N \times (\ln \ln (\min p_i) - 1)$ distinct odd prime factors.
Since the multiplier is $> 1$, $\omega_{\text{odd}}(a_{k+1}) > \omega_{\text{odd}}(a_k)$ on average.
This geometric growth continues as long as the factors remain large.

### 3.2 Stability of Growth

Does the growth stop if we pick up small primes?
Suppose $a_k = L \cdot S$, where $L$ is a product of large primes and $S$ is a product of small primes.
$\sigma(a_k) \approx \sigma(L) \sigma(S)$.
- $\sigma(L)$ generates many new factors (supercritical).
- $\sigma(S)$ generates few factors (subcritical).
The total number of factors is the sum. The contribution from $\sigma(L)$ ensures the total count continues to grow (or at least remains high), dominating the low yield from $S$.
Thus, the presence of small primes does not hinder the growth of $\omega$; it only adds to the abundancy ratio.

---

## 4. Connecting Omega to Ratio Divergence

We show that $\omega(a_k) \to \infty$ implies $R_k \to \infty$ (in probability).

### 4.1 Probabilistic Divisibility

Let $q$ be a fixed small prime (e.g., 3).
For a large random prime $p$, the probability that $q | \sigma(p) = p+1$ is the probability that $p \equiv -1 \pmod q$.
By Dirichlet's theorem, primes are equidistributed in residue classes modulo $q$.
Thus, $P(q | p+1) \approx \frac{1}{q-1}$.

If $a_k$ has $\omega_k$ distinct large prime factors, the probability that $a_{k+1}$ is NOT divisible by $q$ is roughly:
$$ P(q \nmid a_{k+1}) \approx \left(1 - \frac{1}{q-1}\right)^{\omega_k} $$
As $\omega_k \to \infty$, this probability decays exponentially to 0.
Thus, $a_{k+1}$ is almost certainly divisible by $q$.

### 4.2 Accumulation of Small Primes

This logic applies to any finite set of small primes $\{q_1, \dots, q_m\}$.
As $\omega_k$ grows large, $a_{k+1}$ becomes divisible by all $q_1, \dots, q_m$ with high probability.
The abundancy ratio satisfies:
$$ R(n) = \frac{\sigma(n)}{n} > \prod_{p|n} \left(1 + \frac{1}{p}\right) $$
If $a_{k+1}$ is divisible by the first $m$ primes, then:
$$ R(a_{k+1}) > \prod_{i=1}^m \left(1 + \frac{1}{p_i}\right) \approx \ln p_m $$
Since we can choose $m$ arbitrarily large (as $\omega$ grows), the ratio $R_{k+1}$ can be made arbitrarily large.

---

## 5. Proof of Ces√†ro Mean Divergence

We have established:
1.  **Escape:** The sequence visits arbitrarily large primes.
2.  **Growth:** Large primes drive $\omega(a_k)$ to large values via supercritical branching.
3.  **Ratio:** Large $\omega(a_k)$ forces $R(a_{k+1})$ to be large by saturating small prime factors.

Let $R_{max}$ be an arbitrary threshold.
There exists a complexity threshold $\Omega$ such that if $\omega(a_k) > \Omega$, then $E[R_{k+1}] > R_{max}$.
Since the "large prime" regime is absorbing for $\omega$ (supercritical branching), the sequence spends an increasing fraction of time with $\omega > \Omega$.
(Any "reset" to small $\omega$ via Mersenne primes is rare and transient, as Smooth Escape forces a return to large primes).

Therefore, the expected value of $\log R_k$ grows over time.
The Ces√†ro mean $\frac{1}{k} \sum_{i=1}^k \log R_i$ converges to the expectation of the stationary distribution (if it exists) or diverges if the drift is positive.
Given the unbounded nature of primes and the multiplicative growth of $\omega$, the drift is positive and sustained.
Thus, the mean diverges to $\infty$.

Q.E.D.
